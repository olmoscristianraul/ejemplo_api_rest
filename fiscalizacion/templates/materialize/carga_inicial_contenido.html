{% load staticfiles %}
<!DOCTYPE html>
<html>
  <head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    

    <!--Import materialize.css-->
    <!-- <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/> -->
    <!-- <link rel="stylesheet" href="{% static 'materialize/css/materialize.css' %}"> -->
    <link rel="stylesheet" href="{% static 'materialize/css/materialize.min.css' %}">

    <link rel="stylesheet" href="{% static 'css/index.css' %}">



    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>


    <!--JavaScript at end of body for optimized loading-->
    <!-- <script type="text/javascript" src="js/materialize.min.js"></script> -->


    <!-- Iconos y fuentes local -->
    <!-- http://google.github.io/material-design-icons/#icon-font-for-the-web -->



  </head>

  <body>

    <nav>
    <div class="nav-wrapper blue">
      <a href="#!" class="brand-logo" style="margin-left: 1em">Fiscalización</a>
      <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
      <ul class="right hide-on-med-and-down">
        <li><a href={%url 'r132:inicio' %}><i class="material-icons left">home</i>Inicio</a></li>
        <li><a href="badges.html">Componentes</a></li>
        <li><a href="collapsible.html">Ejemplos</a></li>
        <li><a href="mobile.html">Contacto</a></li>
      </ul>
    </div>
  </nav>

  <ul class="sidenav" id="mobile-demo">
    <li><a href={%url 'r132:inicio' %}><i class="material-icons">home</i>Inicio</a></li>
    <li><a href="badges.html">Componentes</a></li>
    <li><a href="collapsible.html">Ejemplos</a></li>
    <li><a href="mobile.html">Contacto</a></li>
  </ul>

    <div class="contailner">
 		<div class="card-panel waves-effect waves-block waves-light">
		  	<div class="row">
		    	<form class="col s12">

		      		

		      		<div class="row">
		      			<ul class="collapsible" data-collapsible = "accordion">
			      			<li>
							    <div class="collapsible-header">
									<i class="material-icons left">map</i>Datos de la parcela
									<!-- <span class="new badge">4 campos</span> -->
								</div>
								<div class="collapsible-body">
									<div class="card-panel waves-effect waves-block waves-light">
										<div class="input-field col s6 m3 I3">
										  <input id="partido" type="text" class="validate">
										  <label for="partido">Partido</label>
										</div>
										<div class="input-field col s6 m3 I3">
										  <input id="partida" type="text" class="validate">
										  <label for="partida">Partida</label>
										</div>
										<div class="input-field col s6 m3 I3">
										  <input id="metros" type="text" class="validate">
										  <label for="metros">Metros</label>
										</div>
										<div class="input-field col s6 m3 I3">
										  <input id="monto" type="text" class="validate">
										  <label for="monto">Monto</label>
										</div>
									</div>
								</div>
				    		</li>
				    	</ul>
				    </div>


			    <div class="row">
			      	<ul class="collapsible" data-collapsible = "accordion">
			      		<li>
				      		<div class="collapsible-header">
						      <i class="material-icons">library_books</i>
						      Expediente
						      <!-- <span class="new badge">4 campos</span> -->
						  	</div>
						  	<div class="collapsible-body">
						  		<div class="card-panel waves-effect waves-block waves-light">
							        <div class="input-field col s12 m3 I3">
							          <input value = "2360" id="expte1" type="text" class="validate">
							          <label for="expte1">Organismo</label>
							        </div>
							        <div class="input-field col s4 m3 I3">
							          <input id="expte2" type="text" class="validate">
							          <label for="expte2">Número</label>
							        </div>
							        <div class="input-field col s3 m3 I3">
							          <input value="0000" id="expte3" type="text" class="validate">
							          <label for="expte3">Cuerpo</label>
							        </div>
							        <div class="input-field col s3 m3 I3">
							          <input value="0" id="expte4" type="text" class="validate">
							          <label for="expte4">Alcance</label>
							        </div>
							    </div>
						    </div>
						</li>
					</ul>
				</div>




				<div class="row">
			      	<ul class="collapsible" data-collapsible = "accordion">
			      		<li>
				      		<div class="collapsible-header">
						      <i class="material-icons">person_pin_circle</i>
						      Contribuyente y domicilio
						      <!-- <span class="new badge">4 campos</span> -->
						  	</div>
						  	<div class="collapsible-body">
						  		<div class="card-panel waves-effect waves-block waves-light">
						  			<div class="input-field col s12 m8 I6">
							          <input id="contribuyente" type="text" class="validate">
							          <label for="contribuyente">Contribuyente</label>
							        </div>
							        <!-- <div class="input-field col s12 m4 I5">
							          <input id="tipo_domicilio" type="text" class="validate">
							          <label for="tipo_domicilio">Tipo Domicilio</label>
							        </div> -->
							        <div class="input-field col s12 m4 I5">
									    <select serchable='seleccionar' id="tipo_domicilio">
									    	<option value="" disabled selected>Seleccione opcción</option>
								      		<option value="Fiscal">Fiscal</option>
										    <option value="Inmueble">Inmueble</option>
										    <option value="Constituido">Constituido</option>
										    <option value="Otro">Otro</option>
										</select>
								      <label for="tipo_domicilio">Tipo Domicilio</label>
								    </div>

							        <div class="input-field col s6 m6 I3">
							          <input id="calle" type="text" class="validate">
							          <label for="calle">Calle</label>
							        </div>
							        <div class="input-field col s6 m6 I3">
							          <input id="numero" type="text" class="validate">
							          <label for="numero">Número</label>
							        </div>

							        <div class="input-field col s12 m12 I3">
									    <input type="text" id="localidad" class="autocomplete" name="localidad">
								      <label for="localidad">Localidad</label>
								      <ul id="searchResult"></ul>
								    </div>

								    

							        <div class="input-field col s6 m6 I3">
							          <input id="pdo" type="text" class="validate">
							          <label for="pdo">Partido</label>
							        </div>
							        <div class="input-field col s6 m6 I3">
							          <input id="cp_postal" type="text" class="validate">
							          <label for="cp_postal">CP</label>
							        </div>
							    </div>
						    </div>
						</li>
					</ul>
				</div>



				<div class="row">
			      	<ul class="collapsible" data-collapsible = "accordion">
			      		<li>
				      		<div class="collapsible-header">
						      <i class="material-icons">apps</i>
						      Datos del Operativo
						      <!-- <span class="new badge">4 campos</span> -->
						  	</div>
						  	<div class="collapsible-body">
						  		<div class="card-panel waves-effect waves-block waves-light">
							        <!-- <div class="input-field col s6 m6 I3">
							          <input id="accion" type="text" class="validate">
							          <label for="accion">Acción</label>
							        </div> -->
							        <div class="input-field col s12 m4 I5">
									    <select serchable='seleccionar' id="accion">
									    	<option value="" disabled selected>Seleccione opcción</option>
								      		<option value="IP">IP</option>
										    <option value="RP">RP</option>
										    <option value="Otro">Otro</option>
										</select>
								      <label for="tipo_domicilio">Acción</label>
								    </div>
							        <!-- <div class="input-field col s6 m6 I3">
							          <input id="subaccion" type="text" class="validate">
							          <label for="subaccion">Sub. Acción</label>
							        </div> -->
							        <div class="input-field col s12 m4 I5">
									    <select serchable='seleccionar' id="subaccion">
									    	<option value="" disabled selected>Seleccione opcción</option>
								      		<option value="N84">N84</option>
										    <option value="R84">R84</option>
										    <option value="IPUC">IPUC</option>
										    <option value="IPEX">IPEX</option>
										    <option value="Otro">Otro</option>
										</select>
								      <label for="tipo_domicilio">Sub-acción</label>
								    </div>

							        <div class="input-field col s6 m6 I3">
							          <input id="operativo" type="text" class="validate">
							          <label for="operativo">Operativo</label>
							        </div>
							        <div class="input-field col s6 m6 I3">
							          <input id="op_origen" type="text" class="validate">
							          <label for="op_origen">Op. Origen</label>
							        </div>
							        <div class="input-field col s6 m6 I2">
							          <!-- <input id="f_salida" type="text" class="validate"> -->
 										<input type="text" class="datepicker">
										<label for="f_salida">Fecha Salida</label>
							        </div>
							    </div>
						    </div>
						</li>
					</ul>
				</div>
    		</div>
    	</form>
    </div>
</div>

	

    <script src="{% static 'js/jquery-3.4.1.js' %}"></script>
    <script src="{% static 'materialize/js/materialize.js' %}"></script>

    <script>
      $(document).ready(function(){
        $('.sidenav').sidenav();
        $('.collapsible').collapsible();
        $('select').formSelect();
        $('.datepicker').datepicker();
      });
    </script>

    <!-- Funciona ok -->
    <script type="text/javascript">
		document.addEventListener('DOMContentLoaded', function() {
            // var options = document.querySelectorAll('select');
            var options = {
            	data: {
	            	"Apple": null,
	            	"Microsoft": null,
	            	"Google": null
            	},
            	limit:3,
            	minLength:3,
            	onAutocomplete: function(resultado){
            		// console.log('completo: '+resultado);
            		document.getElementById('seleccionado').innerHTML="Seleccionado: "+resultado
            	}
        	};
	        var elems = document.querySelectorAll('.autocomplete');
	        var instamces = M.Autocomplete.init(elems, options);
        });
    </script>

    <!-- <script type="text/javascript">
		$(document).ready(function(){
			$('#buscar_1').autocomplete({
            	data: {
	            	"Apple": null,
	            	"Microsoft": null,
	            	"Google": null
            	},
            	limit:3,
            	minLength:3,
            	onAutocomplete: function(){
            		console.log('completo');
            	}
        	});
        });
    </script> -->

	<script type="text/javascript">
		$(document).ready(function() {
		  $(function() {
			$.ajax({
			  type: 'GET',
			  url: 'http://192.168.0.12:8000/api/unprefijo/',
			  format: 'json',
		
			  success: function(response) {
				var resultado = response;
				
				var datos = [];
				for (var i = 0; i < resultado.length; i++) {
				  datos[resultado[i].ds_localidad.trim()] = resultado[i].id+','+resultado[i].partido+','+resultado[i].cp_postal
				}
				$('#localidad').autocomplete({
					data: datos,
					  limit:10,
					minLength:1,
					onAutocomplete : function(seleccionado) {
						buscado = buscar(seleccionado);
					},
				});
		 
				function buscar(dato_a_buscar){ 
					
					var d = [];
					var cp_array = [];
					var elementos = [];
					for (var i = 0; i < resultado.length; i++) {
						  d[resultado[i].id] = resultado[i].ds_localidad.trim()+','+resultado[i].partido+','+resultado[i].cp_postal +','+resultado[i].id
					  }
		
					  for (var i = 1; i < d.length; i++) {
		
						  var separado = d[i].split(',');
						  
						  if (separado[0] == dato_a_buscar) {
		
							  //obtengo la lista de elementos resultado
							  elementos[separado[3]] = separado[3]+','+separado[0]+','+separado[1]+','+separado[2]
							  cp_array[separado[2]]=(separado[2]+': '+ null)
							  
							  $("#pdo").val(separado[1]);
							  $("#cp_postal").val(separado[2]);
						  }
		
						  $('#cp_postal').autocomplete({
								data: cp_array,
								  //limit:10,
								// minLength:1,
						});
						
					  }	
				}
			  },
		
			});
			
		
		  });
		});
		
		
		</script>

    

    
   


  </body>
</html>
        